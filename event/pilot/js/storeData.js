allStoreData = [
    {
        "type": 'together',
        "name": '胖廚義大利麵',
        "address": '221新北市汐止區忠孝東路211巷28號',
        "phone": '02-86462718',
        "photo": 'PALM-PASTA',
        "region": '汐止區',
        "landing": 'cef4829c-f226-4281-8c9a-cb6040eabcca',
    },
    {
        "type": 'fitness',
        "name": 'hala chicken',
        "address": '106台北市大安區延吉街103號',
        "phone": '02-87726300',
        "photo": 'halachicken',
        "region": '大安區',
        "landing": 'c564d63e-0e50-4079-be0e-f82a7d1c12f8',
    },
    {
        "type": 'fitness',
        "name": 'hokenbits',
        "address": '106台北市大安區延吉街103號1樓',
        "phone": '02-87726300',
        "photo": 'hokenbits',
        "region": '大安區',
        "landing": '63e765bd-7a49-4c4c-8fc9-ba256807d1cd',
    },
    {
        "type": 'together',
        "name": "Pimo's Café 皮莫咖啡",
        "address": '台北市中山區合江街13號',
        "phone": '02 2509 0159',
        "photo": 'pimocafe',
        "region": '中山區',
        "landing": '584c8a47-847c-4e36-a9d2-865b5c304aef',
    },
    {
        "type": 'together',
        "name": "98 Nine Eight Land 南港中研店",
        "address": '台北市南港區研究院路二段54巷12號',
        "phone": '02 2783 5111',
        "photo": '98nineeightland',
        "region": '南港區',
        "landing": '00a84369-3eab-4a29-810b-acb8d411d273',
    },
    {
        "type": 'fresh',
        "name": "麵屋牛一雞骨牛肉麵",
        "address": '台北市大安區敦化南路1段151號1樓',
        "phone": '02 2752 1552',
        "photo": 'yuan-hot-pot',
        "region": '大安區',
        "landing": '50b92e9f-0d03-4d2b-a207-078eda7e6771',
    },
    {
        "type": 'fresh',
        "name": "迷迭香花園餐廳",
        "address": '104台北市中山區南京東路三段48巷6號1樓',
        "phone": '0926-866452',
        "photo": 'rosmarineGiardino',
        "region": '中山區',
        "landing": '7bbea967-a75b-467d-a249-4d2819afb9f1',
    },
    {
        "type": 'fresh',
        "name": "Sanzo三藏和牛火鍋 しゃぶしゃぶ専門店",
        "address": '106台北市大安區忠孝東路三段251巷8弄2號',
        "phone": '0972-353886',
        "photo": 'Sanzo',
        "region": '大安區',
        "landing": '6965f2bb-4788-489f-ada1-ac621b2f5b5f',
    },
    {
        "type": 'together',
        "name": "姐夫重慶麵館",
        "address": '231新北市新店區建國路196號',
        "phone": '0939-161308',
        "photo": 'jie-fu-zhong-qing',
        "region": '新店區',
        "landing": '87864319-427e-4737-af3d-fa058f7d8e22',
    },
    {
        "type": 'together',
        "name": "四季香饅頭南京店",
        "address": '105台北市松山區南京東路五段274號',
        "phone": '02 2760 0666',
        "photo": 'jessybun',
        "region": '松山區',
        "landing": 'db078a44-22c1-4986-911f-2a2cbb5c18c7',
    },
    {
        "type": 'together',
        "name": "四季香頂級手工饅頭",
        "address": '10491台北市中山區五常街61號',
        "phone": '02 2517 3193',
        "photo": 'jessybun',
        "region": '中山區',
        "landing": '344d2f70-ae56-486f-b446-aa631a34d637',
    },
    {
        "type": 'together',
        "name": "新丼",
        "address": '台北市大同區長安西路66號1F',
        "phone": '02-2555-9292',
        "photo": 'Newdonburi',
        "region": '大同區',
        "landing": '21a3e804-4894-43af-ab28-7566dc650f56',
    },
    {
        "type": 'together',
        "name": "來搭伙吧 RENDEZVOUS BAR",
        "address": '10491台北市中山區中山北路二段137巷45號',
        "phone": '0908 317 2082',
        "photo": 'RENDEZVOUS-BAR',
        "region": '中山區',
        "landing": 'dc6221d6-9cb9-4d7a-bb1b-e8eea612730d',
    },
    {
        "type": 'together',
        "name": "Leone Restaurant & Bar",
        "address": '104台北市中山區林森北路353巷20號',
        "phone": '02 2581 3109',
        "photo": 'leonetaipei',
        "region": '中山區',
        "landing": 'a38f4230-c8a9-4f05-af6d-224dfc199e9f',
    },
    {
        "type": 'together',
        "name": "ChiaoDuo House巧哚洋房",
        "address": '106台北市大安區仁愛路四段345巷5弄17號',
        "phone": '02 2778 3347',
        "photo": 'ChiaoDuoHouse',
        "region": '大安區',
        "landing": '7c78153d-a6c8-4b7d-8e77-3f13ab1d75f8',
    },
    {
        "type": 'fresh',
        "name": "Nite Nite 酒鈅酒 Bistro Bar",
        "address": '106台北市大安區復興南路二段185號',
        "phone": '02 2325 6789',
        "photo": 'NiteNite',
        "region": '大安區',
        "landing": '66cd82bd-c55c-4289-8142-43bb5f0513f6',
    },
    {
        "type": 'fresh',
        "name": "歐吧噠韓餐酒 오빠닭 감성포차 Oppadak",
        "address": '台北市中山區中山北路二段183巷2-4號',
        "phone": '02 2596 3777',
        "photo": 'Oppadak',
        "region": '中山區',
        "landing": 'b7db84c8-77f8-4fb2-abb9-e4a6c96f1a8e',
    },
    {
        "type": 'fresh',
        "name": "Oskafe coffee wine sandwich",
        "address": '台北市中山區堤頂大道二段292號',
        "phone": '02 8502 7131',
        "photo": 'Oskafe',
        "region": '中山區',
        "landing": '17608044-d805-4093-842c-7c074eb2953e',
    },
    {
        "type": 'fresh',
        "name": "同安樂一店",
        "address": '台北市大同區迪化街一段242號',
        "phone": '02-25576939',
        "photo": 'Taipeiness',
        "region": '大安區',
        "landing": 'b78f47b1-5370-4310-a4df-1de34f5f025b',
    },
    {
        "type": 'fresh',
        "name": "同安樂二店",
        "address": '台北市大同區迪化街一段121號',
        "phone": '0986-685865',
        "photo": 'Taipeiness',
        "region": '大安區',
        "landing": 'f95b7ef2-8805-45d6-8c93-e9e44b3be64a',
    },
    {
        "type": 'together',
        "name": "紅九九個人鴛鴦鍋市府店",
        "address": '台北市逸仙路42巷9號',
        "phone": '02-87867299',
        "photo": 'red9999',
        "region": '信義區',
        "landing": '211b7dd5-ccb3-4c41-aa44-72a473f5c92a',
    },
    {
        "type": 'vegetarian',
        "name": "秋紅園野菜鍋物",
        "address": '105台北市松山區光復北路11巷67號1號樓&B1',
        "phone": '02 2716 0009',
        "photo": 'yuan86',
        "region": '松山區',
        "landing": '3406e335-cbd3-4bdd-ac39-49c1789262c7',
    },
    {
        "type": 'fitness',
        "name": "Dr.salt",
        "address": '105台北市松山區南京東路四段21號2樓',
        "phone": '02 2542 2179',
        "photo": 'DrSalt',
        "region": '松山區',
        "landing": 'bc36d7f1-142d-4d74-a1b6-6627394b5892',
    },
    {
        "type": 'fitness',
        "name": "吾糖派健康食品",
        "address": '110台北市信義區松仁路260號2樓',
        "phone": '02 2701 5138',
        "photo": 'wtpie',
        "region": '信義區',
        "landing": '2af0cc3d-fb99-4069-a765-71d788a71d1a',
    },
    {
        "type": 'fitness',
        "name": "LIFE KITCHEN 生活倉廚｜萬華門市",
        "address": '108台北市萬華區西寧南路285號',
        "phone": '02 2883 1122',
        "photo": 'LIFE-KITCHEN',
        "region": '萬華區',
        "landing": '55f7df29-579b-4e6d-a219-8f87da89b096',
    },
    {
        "type": 'fitness',
        "name": "LIFE KITCHEN 生活倉廚｜大安門市",
        "address": '106台北市大安區大安路一段51巷17號1樓',
        "phone": '02 8791 2383',
        "photo": 'LIFE-KITCHEN',
        "region": '大安區',
        "landing": '0838eed7-7bb9-4efa-9f00-f18f5e52d6ac',
    },
    {
        "type": 'fitness',
        "name": "LIFE KITCHEN 生活倉廚｜內湖門市",
        "address": '114台北市內湖區新湖三路134號',
        "phone": '02 8791 2383',
        "photo": 'LIFE-KITCHEN',
        "region": '內湖區',
        "landing": 'ef3299b1-6ba1-40ad-9dfd-3532d8965297',
    },
    
]


let fitnessData = allStoreData.filter(item=>item.type=='fitness');
let togetherData = allStoreData.filter(item=>item.type=='together');
let freshData = allStoreData.filter(item=>item.type=='fresh');
let vegetarianData = allStoreData.filter(item=>item.type=='vegetarian');

const storeContainer = document.getElementById('storeContainer');

let showData = (data)=>{
    storeContainer.innerHTML='';
    data.forEach(item=>{
        let li = document.createElement('li');
        li.setAttribute('class','tabCardList__item');
        let topString = `<div class="tabCardList__item_top" style="background-image: url('pilot/img/store/${item['photo']}.jpg');"><p>${item['region']}</p></div>`;
        let bottomString = `<div class="tabCardList__item_bottom">
        <h4>${item['name']}</h4>
        <p>${item['address']}</p>
        <p>${item['phone']}</p>
        <a href="https://www.foodmarco.com/restaurant/${item['landing']}">看食記<img src="pilot/img/Triangle.svg"></a>
        </div>`;
        topString+=bottomString;
        li.innerHTML=topString;
        storeContainer.appendChild(li);
    })
}

// ================= 切換DataList =================


$('.tabList__item').click((e)=>{
    event.preventDefault();
    let type = e.target.id;
    let title = '';
    let subtitle = '';
    if (type == 'fresh'){
        showData(freshData);
        title = '點燃味蕾新火花';
        subtitle = '新開店x特色餐廳x創意料理 新鮮到貨';
    }else if(type == 'together'){
        showData(togetherData);
        title = '感情好就要這樣吃';
        subtitle = '台北歡聚美食餐廳一次收錄';
    }else if(type == 'vegetarian'){
        showData(vegetarianData);
        title = '瘋蔬食這樣吃就對了';
        subtitle = '精選台北市蔬食餐廳';
    }else if(type == 'fitness'){
        showData(fitnessData);
        title = '健身巨巨這樣吃';
        subtitle = '低脂x高蛋白x蔬食 健身餐大解鎖';
    }
    $('.tabList__item').removeClass('tabList__item-active');
    $('#'+type).addClass('tabList__item-active');
    $('#storeTitle').text(title); //更新該分類title
    $('#storeSubtitle').text(subtitle); //更新該分類subtitle

    let tabOffest = $('#tabContent').offset().top;
    let $body = (window.opera) ? (document.compatMode == "CSS1Compat" ? $('html') : $('body')) : $('html,body');
    $body.animate({
          scrollTop: tabOffest-20
    }, 800);


});

// ================= 點擊Tab按鈕切換 =================

$(window).scroll(()=>{
    let tabBtnTop = $('.tabList').offset().top;
    let scrollPos = $(window).scrollTop();
    let tabHeight = $('#tabContent').outerHeight()+$('#tabContent').offset().top;
    let tabOffest = $('#tabContent').offset().top;
    if(scrollPos>=tabBtnTop && scrollPos<=tabHeight && scrollPos>tabOffest){
        $('.tabList').addClass('tabList--fix');
        $('.tabList').css('z-index','999');
    }else if(scrollPos > tabHeight){
        $('.tabList').css('z-index','-10');
    }else if(scrollPos < tabOffest){
        $('.tabList').removeClass('tabList--fix');
    }
    console.log(tabBtnTop,scrollPos,tabHeight);
})

// ================= 滾動監聽餐廳列表Tab =================

showData(freshData);